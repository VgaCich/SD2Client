//------------------------------------------------

#ifndef __spi_h__
#define __spi_h__

//------------------------------------------------

//#include <iom16.h>
//#include <inavr.h>
#include "common.h"
#include "clock.h"
#include "types.h"

#include "terminal.h"

//------------------------------------------------

/*
* +-------+-------+-------+-------+--------------+--------------+
* | speed | SPI2X | SPR1  | SPR0  | data presc.  | clock freq.  |
* +=======+=======+=======+=======+==============+==============+
* |   0   |   0   |   0   |   0   |  CLK/4       | 4MHz         |
* +-------+-------+-------+-------+--------------+--------------+
* |   1   |   0   |   0   |   1   |  CLK/16      | 1MHz         |
* +-------+-------+-------+-------+--------------+--------------+
* |   2   |   0   |   1   |   0   |  CLK/64      | 250kHz       |
* +-------+-------+-------+-------+--------------+--------------+
* |   3   |   0   |   1   |   1   |  CLK/128     | 125kHz       |
* +-------+-------+-------+-------+--------------+--------------+
* |   4   |   1   |   0   |   0   |  CLK/2       | 8MHz         |
* +-------+-------+-------+-------+--------------+--------------+
* |   5   |   1   |   0   |   1   |  CLK/8       | 2MHz         |
* +-------+-------+-------+-------+--------------+--------------+
* |   6   |   1   |   1   |   0   |  CLK/32      | 500kHz       |
* +-------+-------+-------+-------+--------------+--------------+
* |   7   |   1   |   1   |   1   |  CLK/64      | 250kHz       |
* +-------+-------+-------+-------+--------------+--------------+
*/

void spi_init(byte speed);
byte spi_putc(byte c);

//------------------------------------------------

#endif /* __spi_h__ */

//------------------------------------------------
